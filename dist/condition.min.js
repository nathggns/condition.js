/*!
 * condition v1.2.0
 * Copyright (c) 2013 Nathaniel Higgins; Licensed MIT
 * Built on 2013-09-05 
 */
!function(){var a="undefined"!=typeof setImmediate&&function(a){return setImmediate(a)}||function(a){return setTimeout(a,0)},b=function(a,b){if("undefined"!=typeof a.hasOwnProperty)return a.hasOwnProperty(b);if("undefined"!=typeof window&&window.hasOwnProperty)return window.hasOwnProperty.call(a,b);throw"Environment does not support hasOwnProperty"},c=function(a,b,c){for(var d in a)if(a.hasOwnProperty(d)){var e=b.call(c||a,a[d],d,a);if(e===!1)break}},d={callbacks:[],started:!1,add:function(a){this.started||this.start(),this.callbacks.push(a);var b=this.callbacks.length-1,c=this;return function(){c.remove(b)}},remove:function(a){var b=this.callbacks.splice(a,1);return this.started&&!this.callbacks.length&&this.stop(),b},start:function(){return this.started=!0,this.loop()},loop:function(){if(this.started){var b=this;return this.tick(),a(function(){return b.loop()})}},tick:function(){c(this.callbacks,function(a,b){a.call(this,b)},this)},stop:function(){this.started=!1}},e=function(b,c,e,f){"undefined"==typeof f&&(f=!0);var g,h,i=function(){},j=b.async&&c.length>0;return g=function(){var a=c(b.async&&h);j||h(a)},g.isWatching=!1,g.startWatching=function(){g.isWatching=!0,j?setTimeout(g):i=d.add(g)},g.stopWatching=function(){g.isWatching=!1,i()},h=function(c){if(c){if("until"===b.type)return i();if(e(c),"wait"===b.type)return i()}else c||"until"!==b.type||e(c);j&&g.isWatching&&a(g)},g.startWatching(),g},f={},g=function(a){return function(){return Array.prototype.unshift.call(arguments,{type:a,async:!0}),e.apply(this,arguments)}},h=["wait","when","until"];for(var i in h)b(h,i)&&(f[h[i]]=g(h[i]));f.condition=e,f.tick=a,f.has=b,"undefined"!=typeof module&&"exports"in module?module.exports=f:"undefined"!=typeof define?define(function(a,b,c){c.exports=f}):"undefined"!=typeof window&&(window.condition=f)}();